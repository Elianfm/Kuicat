<div class="now-playing-card">
  <img [src]="cover()" alt="Cover" class="card-cover">
  <div class="card-info">
    <span class="card-label">Now Playing</span>
    <span class="card-title">{{ title() }}</span>
    <span class="card-artist">{{ artist() }}</span>
  </div>
  
  <!-- BotÃ³n agregar a playlist -->
  <div class="add-to-playlist">
    <button class="add-btn" (click)="toggleDropdown()" title="Agregar a playlist">
      <span class="material-icons">{{ showPlaylistDropdown() ? 'close' : 'playlist_add' }}</span>
    </button>
    
    @if (showPlaylistDropdown()) {
      <div class="playlist-dropdown">
        <span class="dropdown-title">Playlists:</span>
        @for (playlist of playlists(); track playlist.id) {
          <button 
            class="dropdown-item" 
            [class.in-playlist]="playlist.hasSong"
            (click)="onTogglePlaylist(playlist)"
          >
            <span class="material-icons playlist-icon">{{ playlist.icon }}</span>
            <span class="playlist-name">{{ playlist.name }}</span>
            <span class="material-icons action-icon">
              {{ playlist.hasSong ? 'remove_circle' : 'add_circle' }}
            </span>
          </button>
        }
      </div>
    }
  </div>
</div>
