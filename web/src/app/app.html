<div class="app-container">
  <!-- Layout principal con sidebars -->
  <div class="main-layout">
    <!-- Sidebar izquierda -->
    <app-left-sidebar [activeView]="leftSidebar()" />
    
    <!-- Vista principal (video/cover) -->
    <app-main-view 
      [(leftSidebar)]="leftSidebar"
      [(rightSidebar)]="rightSidebar"
    />
    
    <!-- Sidebar derecha -->
    <app-right-sidebar 
      [activeView]="rightSidebar()" 
      [currentSongId]="currentSong()?.id || 0"
    />
  </div>
  
  <!-- Cards flotantes (posicionadas respecto a la pantalla) -->
  <app-now-playing-card 
    class="floating-card-left"
    [songId]="currentSong()?.id || null"
    [title]="currentSong()?.title || 'Sin canción'" 
    [artist]="currentSong()?.artist || 'Artista desconocido'"
    [cover]="getCoverUrl(currentSong())"
    [rankPosition]="currentSong()?.rankPosition || null"
  />
  <app-next-song-card 
    class="floating-card-right"
    [songId]="nextSong()?.id || null"
    [title]="nextSong()?.title || 'No hay siguiente'" 
    [artist]="nextSong()?.artist || 'Artista desconocido'"
    [cover]="getCoverUrl(nextSong())"
    [rankPosition]="nextSong()?.rankPosition || null"
  />
  
  <!-- Player bar (aparece al hover) -->
  <app-player-bar 
    class="player-bar-hover" 
    (openSettings)="openConfigModal()"
  />
  
  <!-- Modal de configuración -->
  <app-config-modal
    [isOpen]="configModalOpen()"
    [config]="appConfig()"
    (closeModal)="closeConfigModal()"
    (configChange)="onConfigChange($event)"
  />
  
  <!-- Toast notifications -->
  <app-toast />
  
  <!-- Confirm dialog (global) -->
  <app-confirm-dialog />
</div>
